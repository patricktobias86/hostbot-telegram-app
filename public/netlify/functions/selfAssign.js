import fetch from"node-fetch";exports.handler=async e=>{let t;try{t=JSON.parse(e.body)}catch(e){return{statusCode:400,body:JSON.stringify({error:"Invalid JSON format"})}}const{discordId:r}=t;if(!r)return{statusCode:400,body:JSON.stringify({error:"Discord ID is required"})};const s={variables:[{name:"message",variable:"{event_message}",value:r}]},o=process.env.GOOGLE_API_URL;if(!o)return{statusCode:500,body:JSON.stringify({message:"API URL not configured"})};try{const e=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await e.json();return{statusCode:200,body:JSON.stringify(t)}}catch(e){return{statusCode:500,body:JSON.stringify({error:"Failed to send request",details:e.message})}}};